# Fintech_rank66
招商银行2021fintech精英训练营数据赛道——业务量预测——B榜第66名

# 一、赛题
给定A、B两种岗位从2018年1月1日起的业务量数据，要求选手预测2020年11月（A榜要求）/2020年12月（B榜要求）整个月份中每天的业务量。具体分为两个任务：
1. 预测全天业务量
2. 预测每天中正常工作时间（早8点半到晚18点半）的业务量

# 二、赛题分析
由于本题目所给的数据量非常少，去掉异常值后采用一些较为简单的模型就能取得非常不错的效果。有大佬采用经典的Arima模型对时间序列进行分解，配合一些简单的规则对结果进行微调，就能拿到非常好的名次。

# 三、模型思路与结构
我采用时间序列分解+Lightgbm的预测方案，将时间序列分解的结果作为输入Lightgbm的特征。具体的：
## 1. 采用Facebook开源的fbprophet框架进行时间序列分解 (feature_day.py、feature_periods.py)
  (1). 对各种节假日、疫情期间（2020年1月末到4月底）进行建模，排除这些特殊事件对周期性的影响；
  (2). 提取时间序列的年、月、日周期性；
  (3). 使用拟牛顿法求解，得到(1)、(2)中各项的量化结果。
## 2. 使用Lightgbm进行预测 (AandB_day.py、AandB_periods.py)
  (1). 除了常规使用的年、月、日、星期、季度、是否工作日等特征外，将上一步中时间序列分解出的各项也作为特征输入Lightgbm，总共约100维；
  (2). 考虑到数据量过少，我在去除数据中异常值的基础上，未使用一些常用的防止过拟合的措施（样本采样、特征采样），让树尽可能充分生长；
  (3). 用训练好的模型直接对测试集进行预测。
  
# 四、总结
B榜一共三天，这期间大家非常卷，排名波动十分激烈。我在前两天两度冲到30多名，但最后一天没找到大的改进点，导致掉出了前50。
到了最后关头，对数据的敏感性十分重要。前几名大部分都是直接对预测结果进行调整，靠着直觉上大分的。
